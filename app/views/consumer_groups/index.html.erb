<%= render partial: 'shared/title', locals: { title: @cluster.to_human, subtitle: 'Consumers' } %>

<div class="level"a>
  <%=
    render(
      partial: 'shared/search_bar',
      locals: {
        resources: @groups,
        resource_name: 'consumer',
        resource_path: cluster_consumer_groups_path,
        filter_property: :group_id
      }
    )
  %>
</div>

<table class="table is-striped is-fullwidth is-bordered">
  <thead>
    <th>Group Id</th>
    <th>Topic(s)</th>
    <th>Coordinator</th>
    <th>Members</th>
    <th>State</th>
  </thead>
  <tbody>
    <% @groups.each do |group| %>
      <tr>
        <td><%= link_to group.group_id, consumer_groups_path(group) %>
        <% if group.consumed_topics.any? %>
          <td><%= group.consumed_topics.map(&:name).join(', ') %>
        <% else %>
          <td class="has-text-grey-lighter">N/A</td>
        <% end %>
        <td><%= group.coordinator.node_id %></td>
        <td><%= group.members.count %></td>
        <td class="<%= status_color(group) %>"><%= group.state.upcase %></td>
      </tr>
    <% end %>
  </tbody>
</table>
